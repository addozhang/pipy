---
title: Configuration.detectProtocol()
api: Configuration.detectProtocol
---

## Description

Appends a **detectProtocol** filter to the current pipeline layout.

A **detectProtocol** filter calls a user function to tell what protocol the input stream is. Its input and output can be any kinds of events.

<FilterDiagram
  name="detectProtocol"
  input="Event"
  output="Event"
/>

The user function that gets called will have a string as parameter, which can be:

* _"TLS"_ if a [TLS](https://en.wikipedia.org/wiki/Transport_Layer_Security) stream is detected
* _"HTTP"_ if a plain HTTP/1.0 or HTTP/1.1 stream is detected
* _""_ (empty string) if the stream is concluded to be none of the above protocols

This filter passes everything down unaltered. It doesn't change anything in the event stream.

## Syntax

``` js
pipy()
  .pipeline('example')
    .detectProtocol(
      (protocolName) => onProtocolDetected()
    )
```

### Parameters

<Parameters/>

### Return value

<ReturnValue/>

## See Also

* [Configuration](/reference/api/Configuration)
* [handleTLSClientHello()](/reference/api/Configuration/handleTLSClientHello)
