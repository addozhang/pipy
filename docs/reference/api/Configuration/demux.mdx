---
title: "Configuration.demux()"
api: Configuration.demux()
---

## Description

Appends a **demux** filter to the current pipeline layout.

A **demux** filter **de-multiplexes** [Messages](/reference/api/Message) from its input stream, distribute them to many sub-pipelines and multiplexes their output _Messages_ into a single output _Message_ stream. Its input and output are _Messages_. Its sub-pipelines's input and output are also _Messages_.

|          |             |         |             |                |
|---------:|:-----------:|:-------:|:-----------:|:--------------:|
|          | **Message** |         | **Message** |                |
| _Input_  | →           |         | →           |                |
|          |             | `demux` |             | `sub-pipeline` |
| _Output_ | ←           |         | ←           |                |
|          | **Message** |         | **Message** |                |

A **demux** filter works like this:

- At the input to a **demux** filter, _Messages_ are separated
- For each input _Message_, a dedicated sub-pipeline is created, whose input will be that _Message_
- At the output from the **demux** filter, output _Messages_ coming out of all sub-pipelines are combined in the same order as they come out of their sub-pipelines (compare to [demuxQueue()](/reference/api/Configuration/demuxQueue))

One **demux** filter can have more than one sub-pipelines, each of which handles one _Message_.

|                 |    |         |    |                   |
|----------------:|:--:|:-------:|:--:|:------------------|
|                 |    |         | ←→ | `sub-pipeline #1` |
| `main pipeline` | ←→ | `demux` | ←→ | `sub-pipeline #2` |
|                 |    |         | ←→ | `sub-pipeline #N` |

## Syntax

``` js
pipy()
  .pipeline('example')
    .demux(layout)
```

### Parameters

<Parameters/>

### Return value

<ReturnValue/>

## See Also

* [Configuration](/reference/api/Configuration)
* [demuxQueue()](/reference/api/Configuration/demuxQueue)
* [demuxHTTP()](/reference/api/Configuration/demuxHTTP)
* [merge()](/reference/api/Configuration/merge)
* [muxQueue()](/reference/api/Configuration/muxQueue)
* [muxHTTP()](/reference/api/Configuration/muxHTTP)
* [serveHTTP()](/reference/api/Configuration/serveHTTP)
